<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/components/Auth/SignIn/index.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/Auth/SignIn/index.tsx" />
              <option name="originalContent" value="&quot;use client&quot;;&#10;import { useSession } from &quot;next-auth/react&quot;;&#10;import Link from &quot;next/link&quot;;&#10;import { useRouter } from &quot;next/navigation&quot;;&#10;import { useContext, useState, useEffect } from &quot;react&quot;;&#10;import SocialSignIn from &quot;../SocialSignIn&quot;;&#10;import toast, { Toaster } from &quot;react-hot-toast&quot;;&#10;import AuthDialogContext from &quot;@/app/context/AuthDialogContext&quot;;&#10;import Logo from &quot;@/components/Layout/Header/BrandLogo/Logo&quot;;&#10;&#10;const Signin = ({ signInOpen }: { signInOpen?: any }) =&gt; {&#10;  const { data: session } = useSession();&#10;  const [username, setUsername] = useState(&quot;he186939nguyenlongnhat@gmail.com&quot;);&#10;  const [password, setPassword] = useState(&quot;Nhat123&quot;);&#10;  const authDialog = useContext(AuthDialogContext);&#10;  const [loading, setLoading] = useState(false);&#10;  const router = useRouter();&#10;&#10;  const handleSocialLoginSuccess = () =&gt; {&#10;    toast.success(&quot;Đăng nhập thành công&quot;);&#10;    router.push(&quot;/&quot;);&#10;  };&#10;&#10;  useEffect(() =&gt; {&#10;    if (session) {&#10;      handleSocialLoginSuccess();&#10;    }&#10;  }, [session, router]);&#10;&#10;  const handleLogin = async (e: React.FormEvent&lt;HTMLFormElement&gt;) =&gt; {&#10;    e.preventDefault();&#10;    setLoading(true);&#10;&#10;    try {&#10;      const res = await fetch(&#10;        &quot;https://cinema-booking-l32q.onrender.com/login&quot;,&#10;        {&#10;          method: &quot;POST&quot;,&#10;          headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },&#10;          body: JSON.stringify({ email: username, password }),&#10;        }&#10;      );&#10;&#10;      const data = await res.json();&#10;      const token = data.user?.token;&#10;&#10;      if (token) {&#10;        // console.log(&quot;Token:&quot;, token);&#10;        localStorage.setItem(&quot;token&quot;, token);&#10;        // Dispatch một sự kiện storage để các component khác (như Header) có thể lắng nghe&#10;        window.dispatchEvent(&#10;          new StorageEvent(&quot;storage&quot;, {&#10;            key: &quot;token&quot;,&#10;            newValue: token,&#10;          })&#10;        );&#10;        handleSocialLoginSuccess();&#10;      } else {&#10;        toast.error(data.message || &quot;Đăng nhập thất bại&quot;);&#10;      }&#10;    } catch (err) {&#10;      console.error(err);&#10;      toast.error(&quot;Lỗi kết nối đến server&quot;);&#10;    } finally {&#10;      setLoading(false);&#10;    }&#10;  };&#10;&#10;  return (&#10;    &lt;&gt;&#10;      &lt;div className=&quot;mb-10 text-center flex justify-center&quot;&gt;&#10;        &lt;Logo /&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;SocialSignIn onSuccess={handleSocialLoginSuccess} /&gt;&#10;&#10;      &lt;span className=&quot;z-1 relative my-8 block text-center&quot;&gt;&#10;        &lt;span className=&quot;-z-1 absolute left-0 top-1/2 block h-px w-full bg-black/10 dark:bg-white/20&quot;&gt;&lt;/span&gt;&#10;        &lt;span className=&quot;text-body-secondary relative z-10 inline-block bg-white px-3 text-base dark:bg-black&quot;&gt;&#10;          OR&#10;        &lt;/span&gt;&#10;        &lt;Toaster /&gt;&#10;      &lt;/span&gt;&#10;&#10;      &lt;form onSubmit={handleLogin}&gt;&#10;        &lt;div className=&quot;mb-[22px]&quot;&gt;&#10;          &lt;input&#10;            type=&quot;text&quot;&#10;            placeholder=&quot;Username&quot;&#10;            required&#10;            value={username}&#10;            onChange={(e) =&gt; setUsername(e.target.value)}&#10;            className=&quot;w-full rounded-2xl border placeholder:text-gray-400 border-black/10 dark:border-white/20 border-solid bg-transparent px-5 py-3 text-base text-dark outline-none transition focus:border-primary focus-visible:shadow-none dark:border-border_color dark:text-white dark:focus:border-primary&quot;&#10;          /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div className=&quot;mb-[22px]&quot;&gt;&#10;          &lt;input&#10;            type=&quot;password&quot;&#10;            required&#10;            value={password}&#10;            placeholder=&quot;Password&quot;&#10;            onChange={(e) =&gt; setPassword(e.target.value)}&#10;            className=&quot;w-full rounded-2xl border border-black/10 dark:border-white/20 border-solid bg-transparent px-5 py-3 text-base text-dark outline-none transition focus:border-primary focus-visible:shadow-none dark:border-border_color dark:text-white dark:focus:border-primary&quot;&#10;          /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div className=&quot;mb-9&quot;&gt;&#10;          &lt;button&#10;            type=&quot;submit&quot;&#10;            disabled={loading}&#10;            className=&quot;flex w-full cursor-pointer items-center justify-center rounded-2xl border border-primary bg-primary hover:bg-transparent hover:text-primary px-5 py-3 text-base text-white transition duration-300 ease-in-out disabled:opacity-60&quot;&#10;          &gt;&#10;            {loading ? &quot;Signing In...&quot; : &quot;Sign In&quot;}&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;      &lt;/form&gt;&#10;&#10;      &lt;div className=&quot;text-center&quot;&gt;&#10;        &lt;Link&#10;          href=&quot;/&quot;&#10;          className=&quot;mb-2 text-base text-dark hover:text-primary dark:text-white dark:hover:text-primary&quot;&#10;        &gt;&#10;          Forget Password?&#10;        &lt;/Link&gt;&#10;      &lt;/div&gt;&#10;      &lt;p className=&quot;text-body-secondary text-base text-center&quot;&gt;&#10;        Not a member yet?{&quot; &quot;}&#10;        &lt;Link href=&quot;/signup&quot; className=&quot;text-primary hover:underline&quot;&gt;&#10;          Sign Up&#10;        &lt;/Link&gt;&#10;      &lt;/p&gt;&#10;    &lt;/&gt;&#10;  );&#10;};&#10;&#10;export default Signin;&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;;&#13;&#10;import { useSession } from &quot;next-auth/react&quot;;&#13;&#10;import Link from &quot;next/link&quot;;&#13;&#10;import { useRouter } from &quot;next/navigation&quot;;&#13;&#10;import { useContext, useState, useEffect } from &quot;react&quot;;&#13;&#10;import SocialSignIn from &quot;../SocialSignIn&quot;;&#13;&#10;import toast, { Toaster } from &quot;react-hot-toast&quot;;&#13;&#10;import AuthDialogContext from &quot;@/app/context/AuthDialogContext&quot;;&#13;&#10;import Logo from &quot;@/components/Layout/Header/BrandLogo/Logo&quot;;&#13;&#10;&#13;&#10;const Signin = ({ signInOpen }: { signInOpen?: any }) =&gt; {&#13;&#10;  const { data: session } = useSession();&#13;&#10;  const [username, setUsername] = useState(&quot;he186939nguyenlongnhat@gmail.com&quot;);&#13;&#10;  const [password, setPassword] = useState(&quot;Nhat123&quot;);&#13;&#10;  const authDialog = useContext(AuthDialogContext);&#13;&#10;  const [loading, setLoading] = useState(false);&#13;&#10;  const router = useRouter();&#13;&#10;&#13;&#10;  const handleSocialLoginSuccess = () =&gt; {&#13;&#10;    toast.success(&quot;Đăng nhập thành công&quot;);&#13;&#10;    window.location.href = &quot;/&quot;;&#13;&#10;  };&#13;&#10;&#13;&#10;  useEffect(() =&gt; {&#13;&#10;    if (session) {&#13;&#10;      handleSocialLoginSuccess();&#13;&#10;    }&#13;&#10;  }, [session, router]);&#13;&#10;&#13;&#10;  const handleLogin = async (e: React.FormEvent&lt;HTMLFormElement&gt;) =&gt; {&#13;&#10;    e.preventDefault();&#13;&#10;    setLoading(true);&#13;&#10;&#13;&#10;    try {&#13;&#10;      const res = await fetch(&#13;&#10;        &quot;https://cinema-booking-l32q.onrender.com/login&quot;,&#13;&#10;        {&#13;&#10;          method: &quot;POST&quot;,&#13;&#10;          headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },&#13;&#10;          body: JSON.stringify({ email: username, password }),&#13;&#10;        }&#13;&#10;      );&#13;&#10;&#13;&#10;      const data = await res.json();&#13;&#10;      const token = data.user?.token;&#13;&#10;&#13;&#10;      if (token) {&#13;&#10;        // console.log(&quot;Token:&quot;, token);&#13;&#10;        localStorage.setItem(&quot;token&quot;, token);&#13;&#10;        // Dispatch một sự kiện storage để các component khác (như Header) có thể lắng nghe&#13;&#10;        window.dispatchEvent(&#13;&#10;          new StorageEvent(&quot;storage&quot;, {&#13;&#10;            key: &quot;token&quot;,&#13;&#10;            newValue: token,&#13;&#10;          })&#13;&#10;        );&#13;&#10;        handleSocialLoginSuccess();&#13;&#10;      } else {&#13;&#10;        toast.error(data.message || &quot;Đăng nhập thất bại&quot;);&#13;&#10;      }&#13;&#10;    } catch (err) {&#13;&#10;      console.error(err);&#13;&#10;      toast.error(&quot;Lỗi kết nối đến server&quot;);&#13;&#10;    } finally {&#13;&#10;      setLoading(false);&#13;&#10;    }&#13;&#10;  };&#13;&#10;&#13;&#10;  return (&#13;&#10;    &lt;&gt;&#13;&#10;      &lt;div className=&quot;mb-10 text-center flex justify-center&quot;&gt;&#13;&#10;        &lt;Logo /&gt;&#13;&#10;      &lt;/div&gt;&#13;&#10;&#13;&#10;      &lt;SocialSignIn onSuccess={handleSocialLoginSuccess} /&gt;&#13;&#10;&#13;&#10;      &lt;span className=&quot;z-1 relative my-8 block text-center&quot;&gt;&#13;&#10;        &lt;span className=&quot;-z-1 absolute left-0 top-1/2 block h-px w-full bg-black/10 dark:bg-white/20&quot;&gt;&lt;/span&gt;&#13;&#10;        &lt;span className=&quot;text-body-secondary relative z-10 inline-block bg-white px-3 text-base dark:bg-black&quot;&gt;&#13;&#10;          OR&#13;&#10;        &lt;/span&gt;&#13;&#10;        &lt;Toaster /&gt;&#13;&#10;      &lt;/span&gt;&#13;&#10;&#13;&#10;      &lt;form onSubmit={handleLogin}&gt;&#13;&#10;        &lt;div className=&quot;mb-[22px]&quot;&gt;&#13;&#10;          &lt;input&#13;&#10;            type=&quot;text&quot;&#13;&#10;            placeholder=&quot;Username&quot;&#13;&#10;            required&#13;&#10;            value={username}&#13;&#10;            onChange={(e) =&gt; setUsername(e.target.value)}&#13;&#10;            className=&quot;w-full rounded-2xl border placeholder:text-gray-400 border-black/10 dark:border-white/20 border-solid bg-transparent px-5 py-3 text-base text-dark outline-none transition focus:border-primary focus-visible:shadow-none dark:border-border_color dark:text-white dark:focus:border-primary&quot;&#13;&#10;          /&gt;&#13;&#10;        &lt;/div&gt;&#13;&#10;        &lt;div className=&quot;mb-[22px]&quot;&gt;&#13;&#10;          &lt;input&#13;&#10;            type=&quot;password&quot;&#13;&#10;            required&#13;&#10;            value={password}&#13;&#10;            placeholder=&quot;Password&quot;&#13;&#10;            onChange={(e) =&gt; setPassword(e.target.value)}&#13;&#10;            className=&quot;w-full rounded-2xl border border-black/10 dark:border-white/20 border-solid bg-transparent px-5 py-3 text-base text-dark outline-none transition focus:border-primary focus-visible:shadow-none dark:border-border_color dark:text-white dark:focus:border-primary&quot;&#13;&#10;          /&gt;&#13;&#10;        &lt;/div&gt;&#13;&#10;        &lt;div className=&quot;mb-9&quot;&gt;&#13;&#10;          &lt;button&#13;&#10;            type=&quot;submit&quot;&#13;&#10;            disabled={loading}&#13;&#10;            className=&quot;flex w-full cursor-pointer items-center justify-center rounded-2xl border border-primary bg-primary hover:bg-transparent hover:text-primary px-5 py-3 text-base text-white transition duration-300 ease-in-out disabled:opacity-60&quot;&#13;&#10;          &gt;&#13;&#10;            {loading ? &quot;Signing In...&quot; : &quot;Sign In&quot;}&#13;&#10;          &lt;/button&gt;&#13;&#10;        &lt;/div&gt;&#13;&#10;      &lt;/form&gt;&#13;&#10;&#13;&#10;      &lt;div className=&quot;text-center&quot;&gt;&#13;&#10;        &lt;Link&#13;&#10;          href=&quot;/&quot;&#13;&#10;          className=&quot;mb-2 text-base text-dark hover:text-primary dark:text-white dark:hover:text-primary&quot;&#13;&#10;        &gt;&#13;&#10;          Forget Password?&#13;&#10;        &lt;/Link&gt;&#13;&#10;      &lt;/div&gt;&#13;&#10;      &lt;p className=&quot;text-body-secondary text-base text-center&quot;&gt;&#13;&#10;        Not a member yet?{&quot; &quot;}&#13;&#10;        &lt;Link href=&quot;/signup&quot; className=&quot;text-primary hover:underline&quot;&gt;&#13;&#10;          Sign Up&#13;&#10;        &lt;/Link&gt;&#13;&#10;      &lt;/p&gt;&#13;&#10;    &lt;/&gt;&#13;&#10;  );&#13;&#10;};&#13;&#10;&#13;&#10;export default Signin;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>